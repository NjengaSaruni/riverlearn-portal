
<div class="ui dividing header">
  <div class="ui right aligned category fluid search">
    <div class="ui icon input">
      <input class="fluid" type="text" placeholder="Search and select recent exams..." (keydup)="getExams($event)">
      <i class="search icon"></i>
    </div>
    <div class="results"></div>
  </div>
</div>
<div class="ui inverted active dimmer" *ngIf="!contentReady">
  <mat-progress-bar
    class="example-margin"
    [color]="color"
    [mode]="mode"
    [value]="value"
    [bufferValue]="bufferValue">
  </mat-progress-bar>
</div>


<div class="ui long modal" id="results-modal">
<!--  <div class="ui inverted active dimmer" *ngIf="!studentsReady">
    <mat-progress-bar
      class="example-margin"
      [color]="color"
      [mode]="mode"
      [value]="value"
      [bufferValue]="bufferValue">
    </mat-progress-bar>
  </div>-->
  <div class="ui blue top attached message">
    <div class="ui menu">
      <div class="item">
        <p>
          {{ selectedPaper?.exam.name }}
        </p>
      </div>
      <div class="item">
        <p>
          {{ selectedClass?.name }}
        </p>
      </div>
      <div class="item">
        <p>
          {{ selectedPaper?.subject.name }}
        </p>
      </div>
      <div class="right item">
        <div class="ui right floated mini statistics">
          <div class="ui mini statistic">
            <div class="value">
              {{ selectedClass?.students.length }}
            </div>
            <div class="label">
              Students
            </div>
          </div>
          <div class="statistic">
            <div class="value">
              31,200
            </div>
            <div class="label">
              Views
            </div>
          </div>
          <div class="statistic">
            <div class="value">
              22
            </div>
            <div class="label">
              Members
            </div>
          </div>
        </div>
      </div>
    </div>
    <input placeholder="Column" type="number" min="0" (input)="selectCell($event)" [(ngModel)]="coordX">
    <input placeholder="Row" type="number" min="0" (input)="selectCell($event)" [(ngModel)]="coordY">
    <input placeholder="Set new value" (input)="changeValue($event)" [(ngModel)]="newValue">
    <p [hidden]="!isLoading">Loading...</p>
    <hot-table
      height="295"
      fixedColumnsLeft="1"
      startRows="15"
      colWidths="100"
      [settings]="settings"
      [rowHeaders]="true"
      [colHeaders]="true"
      [columns]="columns"
      [data]="data"
      (afterSelectionEnd)="syncSelection($event)"
      [outsideClickDeselects]="false"
      hotId="hotInstance">
    </hot-table>
    <div class="ui primary button" (click)="addNewColumn($event)">Add column</div>
  </div>
</div>

<mat-accordion class="example-headers-align">
  <mat-expansion-panel hideToggle="true" *ngFor="let exam of exams">
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{ exam.name}}
      </mat-panel-title>
      <mat-panel-description>
        FROM {{ exam.start_date | date }} TO {{ exam.end_date | date}}
        <mat-icon>folder</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>


    <div class="ui list">
      <div class="ui item" *ngFor="let paper of exam.papers" >
        <div class="ui icon message" *ngFor="let class of paper.classes" (click)="selectPaper(paper, exam, class)">
          <i class="file icon"></i>
          <div class="content">
            <div class="header">
              {{ class.name }}
            </div>
            <p> {{ paper.subject.name  }}</p>
          </div>
        </div>
      </div>

    </div>

    <mat-action-row>
      <button mat-button color="primary" >Next</button>
    </mat-action-row>
  </mat-expansion-panel>


</mat-accordion>



